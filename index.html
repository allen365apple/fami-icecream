<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #71c083; -webkit-text-stroke: #71c083}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #36c0a0; -webkit-text-stroke: #36c0a0}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s5 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s8 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s9 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s10 {font-kerning: none}
    span.s11 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s12 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s13 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s14 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">html</span><span class="s5"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s1">"zh-TW"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">meta</span><span class="s5"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s5"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">title</span><span class="s3">&gt;</span><span class="s1">å…¨å®¶éœœæ·‡æ·‹æŒ‘æˆ°</span><span class="s3">&lt;/</span><span class="s4">title</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">script</span><span class="s5"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s4">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">@import</span><span class="s5"> </span><span class="s6">url</span><span class="s8">(</span><span class="s1">'https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&amp;display=swap'</span><span class="s8">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s4">body</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Noto Sans TC'</span><span class="s8">,</span><span class="s1"> </span><span class="s6">sans-serif</span><span class="s8">;</span></p>
<p class="p3"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">overscroll-behavior:</span><span class="s5"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">touch-action:</span><span class="s1"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">background-color:</span><span class="s1"> #333</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">.game-canvas</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s6">none</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">@keyframes</span><span class="s1"> </span><span class="s6">popIn</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">0%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">scale(</span><span class="s11">0.8</span><span class="s6">)</span><span class="s8">;</span><span class="s1"> </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">0</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s11">100%</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> </span><span class="s2">transform:</span><span class="s1"> </span><span class="s6">scale(</span><span class="s11">1</span><span class="s6">)</span><span class="s8">;</span><span class="s1"> </span><span class="s2">opacity:</span><span class="s1"> </span><span class="s11">1</span><span class="s8">;</span><span class="s1"> </span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">.modal-animate</span><span class="s5"> </span><span class="s8">{</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s2">animation:</span><span class="s5"> </span><span class="s1">popIn</span><span class="s5"> </span><span class="s11">0.3s</span><span class="s5"> </span><span class="s1">cubic-bezier(</span><span class="s11">0.175</span><span class="s8">,</span><span class="s5"> </span><span class="s11">0.885</span><span class="s8">,</span><span class="s5"> </span><span class="s11">0.32</span><span class="s8">,</span><span class="s5"> </span><span class="s11">1.275</span><span class="s1">)</span><span class="s5"> </span><span class="s1">forwards</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s3">&lt;</span><span class="s4">body</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"h-screen w-screen overflow-hidden flex flex-col items-center justify-center select-none"</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- éŠæˆ²ç•«å¸ƒ --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">canvas</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameCanvas"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 w-full h-full z-10 game-canvas"</span><span class="s3">&gt;&lt;/</span><span class="s4">canvas</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- UI å±¤ --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"uiLayer"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 z-20 pointer-events-none flex flex-col justify-between p-6"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mt-2"</span><span class="s3">&gt;&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-center mb-10"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"instructionText"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-blue-900 font-bold text-lg bg-white/90 px-6 py-2 rounded-full inline-block shadow-lg border-2 border-blue-200"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ç›®æ¨™ï¼šå®Œç¾ 3.5 åœˆï¼è¨˜ä½è™›ç·šå½¢ç‹€ï¼</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- é–‹å§‹ç•«é¢ --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"startScreen"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"fixed inset-0 z-30 bg-black/60 backdrop-blur-sm flex items-center justify-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-8 rounded-3xl shadow-2xl text-center max-w-sm w-[90%] modal-animate border-b-8 border-blue-600"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-6xl mb-4"</span><span class="s3">&gt;</span><span class="s1">ğŸ¦</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-black text-slate-800 mb-4 leading-tight"</span><span class="s3">&gt;</span><span class="s5">ä½ èƒ½æ“ å‡ºæ¼‚äº®çš„</span><span class="s3">&lt;</span><span class="s4">br</span><span class="s3">&gt;&lt;</span><span class="s4">span</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-blue-600"</span><span class="s3">&gt;</span><span class="s5">å…¨å®¶éœœæ·‡æ·‹</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span><span class="s5">å—ï¼Ÿ</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-slate-600 mb-6 text-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">span</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s6">"text-sm text-slate-500"</span><span class="s3">&gt;</span><span class="s1">è¨˜æ†¶åŠ›å¤§è€ƒé©—ï¼</span><span class="s3">&lt;</span><span class="s4">br</span><span class="s3">&gt;&lt;</span><span class="s4">b</span><span class="s3">&gt;</span><span class="s1">ç›®æ¨™ï¼šå®Œç¾ 3.5 åœˆ + é ‚éƒ¨æ”¶å°–</span><span class="s3">&lt;/</span><span class="s4">b</span><span class="s3">&gt;&lt;</span><span class="s4">br</span><span class="s3">&gt;</span><span class="s1">çœ‹å¥½è™›ç·šï¼Œé–‹å§‹å¾Œå°±æœƒæ¶ˆå¤±å–”ï¼</span><span class="s3">&lt;/</span><span class="s4">span</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"startBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold py-4 px-10 rounded-full shadow-lg transform transition active:scale-95 w-full"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>é–‹å§‹æŒ‘æˆ°</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s1">&lt;!-- çµç®—ç•«é¢ --&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resultScreen"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"hidden fixed inset-0 z-40 bg-black/70 backdrop-blur-md flex items-center justify-center"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-white p-8 rounded-3xl shadow-2xl text-center max-w-sm w-[90%] modal-animate border-b-8 border-pink-400 relative"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resultEmoji"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-7xl mb-2 absolute -top-12 left-1/2 transform -translate-x-1/2 drop-shadow-lg filter"</span><span class="s3">&gt;</span><span class="s5">ğŸ†</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">h2</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-slate-800 mt-6 mb-1"</span><span class="s3">&gt;</span><span class="s5">æª¢æ¸¬çµæœ</span><span class="s3">&lt;/</span><span class="s4">h2</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"mb-6 mt-8 py-4 bg-slate-50 rounded-xl border border-slate-100"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm text-slate-500 uppercase tracking-wider mb-1"</span><span class="s3">&gt;</span><span class="s5">ç¸½åˆ†</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"flex items-baseline justify-center gap-2"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"scoreDisplay"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-8xl font-black text-blue-600"</span><span class="s3">&gt;</span><span class="s5">0</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-2xl font-bold text-slate-400"</span><span class="s3">&gt;</span><span class="s5">/ 10</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">div</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"titleDisplay"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-xl font-bold text-pink-500 mt-4 px-2"</span><span class="s3">&gt;</span><span class="s5">è¨ˆç®—ä¸­...</span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">p</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"commentDisplay"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-slate-600 mb-6 text-sm italic"</span><span class="s3">&gt;</span><span class="s5">è©•èª...</span><span class="s3">&lt;/</span><span class="s4">p</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">button</span><span class="s5"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"retryBtn"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"bg-pink-500 hover:bg-pink-600 text-white text-xl font-bold py-4 px-8 rounded-full shadow-lg transform transition active:scale-95 w-full flex items-center justify-center gap-2"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">svg</span><span class="s5"> </span><span class="s2">xmlns</span><span class="s3">=</span><span class="s1">"http://www.w3.org/2000/svg"</span><span class="s5"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"h-6 w-6"</span><span class="s5"> </span><span class="s2">fill</span><span class="s3">=</span><span class="s1">"none"</span><span class="s5"> </span><span class="s2">viewBox</span><span class="s3">=</span><span class="s1">"0 0 24 24"</span><span class="s5"> </span><span class="s2">stroke</span><span class="s3">=</span><span class="s1">"currentColor"</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;</span><span class="s4">path</span><span class="s5"> </span><span class="s2">stroke-linecap</span><span class="s3">=</span><span class="s1">"round"</span><span class="s5"> </span><span class="s2">stroke-linejoin</span><span class="s3">=</span><span class="s1">"round"</span><span class="s5"> </span><span class="s2">stroke-width</span><span class="s3">=</span><span class="s1">"2"</span><span class="s5"> </span><span class="s2">d</span><span class="s3">=</span><span class="s1">"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"</span><span class="s5"> </span><span class="s3">/&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">svg</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>å†æŒ‘æˆ°ä¸€æ¬¡</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s4">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> canvas </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'gameCanvas'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> ctx </span><span class="s8">=</span><span class="s1"> canvas</span><span class="s8">.</span><span class="s1">getContext</span><span class="s8">(</span><span class="s9">'2d'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> startScreen </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'startScreen'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> resultScreen </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'resultScreen'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> startBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'startBtn'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> retryBtn </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'retryBtn'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> instructionText </span><span class="s8">=</span><span class="s1"> document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'instructionText'</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s12">// éŠæˆ²ç‹€æ…‹</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> gameState </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'MENU'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> isPressing </span><span class="s8">=</span><span class="s1"> </span><span class="s7">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> hasStarted </span><span class="s8">=</span><span class="s1"> </span><span class="s7">false</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> width</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> nozzle </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> x</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">:</span><span class="s1"> </span><span class="s13">60</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">:</span><span class="s1"> </span><span class="s13">40</span><span class="s1"> </span><span class="s8">};</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> cone </span><span class="s8">=</span><span class="s1"> </span><span class="s8">{</span><span class="s1"> x</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">:</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s8">};</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> iceCreamStack </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[];</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> currentHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s12">// æ“ºå‹•åµæ¸¬</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> lastConeX </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> direction </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> swingCount </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> accumulatedMove </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p8"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s5"> </span><span class="s1">SWING_THRESHOLD</span><span class="s5"> </span><span class="s8">=</span><span class="s5"> </span><span class="s13">10</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> resize</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>width </span><span class="s8">=</span><span class="s1"> window</span><span class="s8">.</span><span class="s1">innerWidth</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>height </span><span class="s8">=</span><span class="s1"> window</span><span class="s8">.</span><span class="s1">innerHeight</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>canvas</span><span class="s8">.</span><span class="s1">width </span><span class="s8">=</span><span class="s1"> width</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>canvas</span><span class="s8">.</span><span class="s1">height </span><span class="s8">=</span><span class="s1"> height</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>nozzle</span><span class="s8">.</span><span class="s1">x </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>nozzle</span><span class="s8">.</span><span class="s1">y </span><span class="s8">=</span><span class="s1"> </span><span class="s13">100</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>nozzle</span><span class="s8">.</span><span class="s1">width </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">min</span><span class="s8">(</span><span class="s13">80</span><span class="s8">,</span><span class="s1"> width </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.15</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">width </span><span class="s8">=</span><span class="s1"> </span><span class="s13">140</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s1">width </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">600</span><span class="s1"> </span><span class="s8">?</span><span class="s1"> </span><span class="s13">1.1</span><span class="s1"> </span><span class="s8">:</span><span class="s1"> </span><span class="s13">1</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">height </span><span class="s8">=</span><span class="s1"> </span><span class="s13">220</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s1">width </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">600</span><span class="s1"> </span><span class="s8">?</span><span class="s1"> </span><span class="s13">1.1</span><span class="s1"> </span><span class="s8">:</span><span class="s1"> </span><span class="s13">1</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">y </span><span class="s8">=</span><span class="s1"> height </span><span class="s8">-</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">height </span><span class="s8">+</span><span class="s1"> </span><span class="s13">30</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>lastConeX </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'resize'</span><span class="s8">,</span><span class="s1"> resize</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>resize</span><span class="s8">();</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> resetGame</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>iceCreamStack </span><span class="s8">=</span><span class="s1"> </span><span class="s8">[];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>hasStarted </span><span class="s8">=</span><span class="s1"> </span><span class="s7">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>isPressing </span><span class="s8">=</span><span class="s1"> </span><span class="s7">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>currentHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>lastConeX </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>direction </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>swingCount </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>accumulatedMove </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>instructionText</span><span class="s8">.</span><span class="s1">style</span><span class="s8">.</span><span class="s1">opacity </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'1'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>instructionText</span><span class="s8">.</span><span class="s1">innerText </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"ç›®æ¨™ï¼šå®Œç¾ 3.5 åœˆï¼è¨˜ä½è™›ç·šå½¢ç‹€ï¼"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> loop</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>update</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>draw</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">gameState </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>requestAnimationFrame</span><span class="s8">(</span><span class="s1">loop</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> update</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">isPressing</span><span class="s8">)</span><span class="s1"> </span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>hasStarted </span><span class="s8">=</span><span class="s1"> </span><span class="s7">true</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>instructionText</span><span class="s8">.</span><span class="s1">style</span><span class="s8">.</span><span class="s1">opacity </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'0'</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// æ“ºå‹•åµæ¸¬</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> diff </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">-</span><span class="s1"> lastConeX</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s14">Math</span><span class="s8">.</span><span class="s1">abs</span><span class="s8">(</span><span class="s1">diff</span><span class="s8">)</span><span class="s1"> </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s13">0.5</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> currentDir </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">sign</span><span class="s8">(</span><span class="s1">diff</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">currentDir </span><span class="s8">!==</span><span class="s1"> direction</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s14">Math</span><span class="s8">.</span><span class="s1">abs</span><span class="s8">(</span><span class="s1">accumulatedMove</span><span class="s8">)</span><span class="s1"> </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s14">SWING_THRESHOLD</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>swingCount</span><span class="s8">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>accumulatedMove </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>direction </span><span class="s8">=</span><span class="s1"> currentDir</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>accumulatedMove </span><span class="s8">+=</span><span class="s1"> diff</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>lastConeX </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">x</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// é«˜åº¦æª¢æŸ¥</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> topY </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y </span><span class="s8">-</span><span class="s1"> currentHeight</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">topY </span><span class="s8">&lt;=</span><span class="s1"> nozzle</span><span class="s8">.</span><span class="s1">y </span><span class="s8">+</span><span class="s1"> </span><span class="s13">80</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>finishSqueezing</span><span class="s8">();</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> dropX </span><span class="s8">=</span><span class="s1"> width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> relativeOffset </span><span class="s8">=</span><span class="s1"> dropX </span><span class="s8">-</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">x</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// é€Ÿåº¦è¨­å®š</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> layerHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">6</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>currentHeight </span><span class="s8">+=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">layerHeight </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.4</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// å¯¬åº¦è¨ˆç®—</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> cycleHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">60</span><span class="s8">;</span><span class="s1"> </span><span class="s12">// 60px ä¸€å¾ªç’°</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> phase </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">currentHeight </span><span class="s8">/</span><span class="s1"> cycleHeight</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> wave </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">sin</span><span class="s8">(</span><span class="s1">phase</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">4</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> baseLayerWidth </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">width </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.95</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> layerWidth </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">max</span><span class="s8">(</span><span class="s13">40</span><span class="s8">,</span><span class="s1"> baseLayerWidth </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">iceCreamStack</span><span class="s8">.</span><span class="s1">length </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.1</span><span class="s8">)</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> wave</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>iceCreamStack</span><span class="s8">.</span><span class="s1">push</span><span class="s8">({</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>offset</span><span class="s8">:</span><span class="s1"> relativeOffset</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>y</span><span class="s8">:</span><span class="s1"> currentHeight</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>width</span><span class="s8">:</span><span class="s1"> layerWidth</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>height</span><span class="s8">:</span><span class="s1"> layerHeight</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>type</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'body'</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> finishSqueezing</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>isPressing </span><span class="s8">=</span><span class="s1"> </span><span class="s7">false</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(!</span><span class="s1">hasStarted </span><span class="s8">||</span><span class="s1"> iceCreamStack</span><span class="s8">.</span><span class="s1">length </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">5</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>endGame</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// æ”¶å°–è§’</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> lastLayer </span><span class="s8">=</span><span class="s1"> iceCreamStack</span><span class="s8">[</span><span class="s1">iceCreamStack</span><span class="s8">.</span><span class="s1">length </span><span class="s8">-</span><span class="s1"> </span><span class="s13">1</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> tipOffset </span><span class="s8">=</span><span class="s1"> lastLayer</span><span class="s8">.</span><span class="s1">offset</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> tipHeight </span><span class="s8">=</span><span class="s1"> currentHeight</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> startWidth </span><span class="s8">=</span><span class="s1"> lastLayer</span><span class="s8">.</span><span class="s1">width</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> tipSteps </span><span class="s8">=</span><span class="s1"> </span><span class="s13">12</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i</span><span class="s8">=</span><span class="s13">0</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">&lt;</span><span class="s1">tipSteps</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> progress </span><span class="s8">=</span><span class="s1"> i </span><span class="s8">/</span><span class="s1"> tipSteps</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> w </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">startWidth </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.7</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s13">1</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">pow</span><span class="s8">(</span><span class="s1">progress</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0.5</span><span class="s8">));</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">w </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">2</span><span class="s8">)</span><span class="s1"> w </span><span class="s8">=</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> h </span><span class="s8">=</span><span class="s1"> </span><span class="s13">6</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">progress </span><span class="s8">*</span><span class="s1"> </span><span class="s13">4</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>tipHeight </span><span class="s8">+=</span><span class="s1"> h </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.8</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>iceCreamStack</span><span class="s8">.</span><span class="s1">push</span><span class="s8">({</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>offset</span><span class="s8">:</span><span class="s1"> tipOffset</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>y</span><span class="s8">:</span><span class="s1"> tipHeight</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>width</span><span class="s8">:</span><span class="s1"> w</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>height</span><span class="s8">:</span><span class="s1"> h</span><span class="s8">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>type</span><span class="s8">:</span><span class="s1"> </span><span class="s9">'tip'</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>endGame</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s1">// ç¹ªè£½å®Œç¾è™›ç·š (Ghost Shape) - å°–é ­ç‰ˆ</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> drawGhost</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">hasStarted</span><span class="s8">)</span><span class="s1"> </span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">save</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">translate</span><span class="s8">(</span><span class="s1">cone</span><span class="s8">.</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">setLineDash</span><span class="s8">([</span><span class="s13">6</span><span class="s8">,</span><span class="s1"> </span><span class="s13">6</span><span class="s8">]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">strokeStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(255, 255, 255, 0.7)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineWidth </span><span class="s8">=</span><span class="s1"> </span><span class="s13">3</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineCap </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"round"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineJoin </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"round"</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// åƒæ•¸è¨­å®š</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> layerH </span><span class="s8">=</span><span class="s1"> </span><span class="s13">60</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> baseW </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">width </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.95</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// å¾å·¦ä¸‹é–‹å§‹</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(-</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// ç¹ªè£½å·¦å´æ³¢æµª (3å±¤)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i</span><span class="s8">=</span><span class="s13">0</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">&lt;</span><span class="s13">3</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> startY </span><span class="s8">=</span><span class="s1"> </span><span class="s8">-</span><span class="s1">i </span><span class="s8">*</span><span class="s1"> layerH</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> endY </span><span class="s8">=</span><span class="s1"> </span><span class="s8">-(</span><span class="s1">i</span><span class="s8">+</span><span class="s13">1</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> layerH</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> w1 </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i </span><span class="s8">*</span><span class="s1"> </span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> w2 </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s8">((</span><span class="s1">i</span><span class="s8">+</span><span class="s13">1</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">bezierCurveTo</span><span class="s8">(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">-</span><span class="s1">w1 </span><span class="s8">-</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> startY </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">layerH</span><span class="s8">/</span><span class="s13">3</span><span class="s8">),</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">-</span><span class="s1">w2 </span><span class="s8">-</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> endY </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">layerH</span><span class="s8">/</span><span class="s13">3</span><span class="s8">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">-</span><span class="s1">w2</span><span class="s8">,</span><span class="s1"> endY</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// ç¹ªè£½é ‚éƒ¨å°–ç«¯ (Pointy Tip)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> topBodyY </span><span class="s8">=</span><span class="s1"> </span><span class="s8">-</span><span class="s13">3</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> layerH</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> topW </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s13">3</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> tipHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">60</span><span class="s8">;</span><span class="s1"> </span><span class="s12">// å°–è§’é«˜åº¦</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// å·¦å´æ”¶å°–</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">quadraticCurveTo</span><span class="s8">(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">-</span><span class="s1">topW </span><span class="s8">+</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> topBodyY </span><span class="s8">-</span><span class="s1"> </span><span class="s13">20</span><span class="s8">,</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s13">0</span><span class="s8">,</span><span class="s1"> topBodyY </span><span class="s8">-</span><span class="s1"> tipHeight<span class="Apple-converted-space">Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// å³å´æ”¶å°–</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">quadraticCurveTo</span><span class="s8">(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>topW </span><span class="s8">-</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> topBodyY </span><span class="s8">-</span><span class="s1"> </span><span class="s13">20</span><span class="s8">,</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>topW</span><span class="s8">,</span><span class="s1"> topBodyY<span class="Apple-converted-space">Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// ç¹ªè£½å³å´æ³¢æµª (å°ç¨±)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i</span><span class="s8">=</span><span class="s13">2</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">&gt;=</span><span class="s13">0</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">--)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> startY </span><span class="s8">=</span><span class="s1"> </span><span class="s8">-(</span><span class="s1">i</span><span class="s8">+</span><span class="s13">1</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> layerH</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> endY </span><span class="s8">=</span><span class="s1"> </span><span class="s8">-</span><span class="s1">i </span><span class="s8">*</span><span class="s1"> layerH</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> w1 </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s8">((</span><span class="s1">i</span><span class="s8">+</span><span class="s13">1</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> w2 </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i </span><span class="s8">*</span><span class="s1"> </span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">bezierCurveTo</span><span class="s8">(</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>w1 </span><span class="s8">+</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> startY </span><span class="s8">+</span><span class="s1"> </span><span class="s8">(</span><span class="s1">layerH</span><span class="s8">/</span><span class="s13">3</span><span class="s8">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>w2 </span><span class="s8">+</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> endY </span><span class="s8">-</span><span class="s1"> </span><span class="s8">(</span><span class="s1">layerH</span><span class="s8">/</span><span class="s13">3</span><span class="s8">),</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>w2</span><span class="s8">,</span><span class="s1"> endY </span><span class="s8">-</span><span class="s1"> </span><span class="s13">5</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// åº•éƒ¨å°å£</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">quadraticCurveTo</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s1">baseW</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s13">5</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">stroke</span><span class="s8">();</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// é«˜åº¦æŒ‡ç¤ºç·šèˆ‡æ–‡å­—</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s5">font </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'bold 16px "Noto Sans TC"'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(255, 255, 255, 0.9)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">textAlign </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'center'</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> labelY </span><span class="s8">=</span><span class="s1"> topBodyY </span><span class="s8">-</span><span class="s1"> tipHeight</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillText</span><span class="s8">(</span><span class="s9">"3.5 åœˆé«˜åº¦"</span><span class="s8">,</span><span class="s1"> </span><span class="s13">80</span><span class="s8">,</span><span class="s1"> labelY </span><span class="s8">+</span><span class="s1"> </span><span class="s13">30</span><span class="s8">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">setLineDash</span><span class="s8">([]);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">strokeStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(255, 255, 255, 0.6)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineWidth </span><span class="s8">=</span><span class="s1"> </span><span class="s13">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(</span><span class="s13">80</span><span class="s8">,</span><span class="s1"> labelY </span><span class="s8">+</span><span class="s1"> </span><span class="s13">35</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s13">10</span><span class="s8">,</span><span class="s1"> labelY </span><span class="s8">+</span><span class="s1"> </span><span class="s13">10</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">stroke</span><span class="s8">();</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">restore</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> draw</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> grad </span><span class="s8">=</span><span class="s1"> ctx</span><span class="s8">.</span><span class="s1">createLinearGradient</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>grad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#f0f9ff'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>grad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">1</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#bfdbfe'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> grad</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillRect</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// Machine Body</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#d1d5db'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillRect</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">150</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">300</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> machineGrad </span><span class="s8">=</span><span class="s1"> ctx</span><span class="s8">.</span><span class="s1">createLinearGradient</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s8">-</span><span class="s13">150</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">/</span><span class="s13">2</span><span class="s8">+</span><span class="s13">150</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>machineGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#9ca3af'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>machineGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0.1</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#f3f4f6'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>machineGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0.5</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#e5e7eb'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>machineGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0.9</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#f3f4f6'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>machineGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">1</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#9ca3af'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> machineGrad</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillRect</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">140</span><span class="s8">,</span><span class="s1"> </span><span class="s13">20</span><span class="s8">,</span><span class="s1"> </span><span class="s13">280</span><span class="s8">,</span><span class="s1"> height</span><span class="s8">-</span><span class="s13">20</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// LOGO</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">save</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#0057a3'</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s5">font </span><span class="s8">=</span><span class="s5"> </span><span class="s1">'900 28px "Noto Sans TC", sans-serif'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">textAlign </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'center'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">textBaseline </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'middle'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillText</span><span class="s8">(</span><span class="s9">"Fami!ce"</span><span class="s8">,</span><span class="s1"> width</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> nozzle</span><span class="s8">.</span><span class="s1">y </span><span class="s8">-</span><span class="s1"> </span><span class="s13">50</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">restore</span><span class="s8">();</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drawCone</span><span class="s8">(</span><span class="s1">cone</span><span class="s8">.</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y</span><span class="s8">,</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">width</span><span class="s8">,</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">height</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// ç•«å®Œç¾è™›ç·š (å¦‚æœé‚„æ²’é–‹å§‹)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drawGhost</span><span class="s8">();</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#fffdd0'</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">shadowColor </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(0,0,0,0.1)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">shadowBlur </span><span class="s8">=</span><span class="s1"> </span><span class="s13">8</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">shadowOffsetX </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s1"> </span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span><span class="s1"> i </span><span class="s8">&lt;</span><span class="s1"> iceCreamStack</span><span class="s8">.</span><span class="s1">length</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> p </span><span class="s8">=</span><span class="s1"> iceCreamStack</span><span class="s8">[</span><span class="s1">i</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> drawX </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">+</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">offset</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> drawY </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y </span><span class="s8">-</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">y</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">p</span><span class="s8">.</span><span class="s1">type </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'tip'</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">ellipse</span><span class="s8">(</span><span class="s1">drawX</span><span class="s8">,</span><span class="s1"> drawY</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">height</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">2</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">ellipse</span><span class="s8">(</span><span class="s1">drawX</span><span class="s8">,</span><span class="s1"> drawY</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">2</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">height </span><span class="s8">*</span><span class="s1"> </span><span class="s13">1.3</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">2</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">shadowColor </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'transparent'</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(255, 255, 255, 0.5)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s1"> </span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i </span><span class="s8">=</span><span class="s1"> </span><span class="s13">5</span><span class="s8">;</span><span class="s1"> i </span><span class="s8">&lt;</span><span class="s1"> iceCreamStack</span><span class="s8">.</span><span class="s1">length</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">+=</span><span class="s13">4</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> p </span><span class="s8">=</span><span class="s1"> iceCreamStack</span><span class="s8">[</span><span class="s1">i</span><span class="s8">];</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">p</span><span class="s8">.</span><span class="s1">width </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">15</span><span class="s8">)</span><span class="s1"> </span><span class="s7">continue</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> drawX </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">+</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">offset </span><span class="s8">-</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">width</span><span class="s8">/</span><span class="s13">3</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> drawY </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y </span><span class="s8">-</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">y</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">ellipse</span><span class="s8">(</span><span class="s1">drawX</span><span class="s8">,</span><span class="s1"> drawY</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">width </span><span class="s8">/</span><span class="s1"> </span><span class="s13">8</span><span class="s8">,</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">height </span><span class="s8">*</span><span class="s1"> </span><span class="s13">0.8</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s13">2</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">isPressing</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> dropStartY </span><span class="s8">=</span><span class="s1"> nozzle</span><span class="s8">.</span><span class="s1">y </span><span class="s8">+</span><span class="s1"> </span><span class="s13">20</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> dropEndY </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">iceCreamStack</span><span class="s8">.</span><span class="s1">length </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>dropEndY </span><span class="s8">=</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">y </span><span class="s8">-</span><span class="s1"> iceCreamStack</span><span class="s8">[</span><span class="s1">iceCreamStack</span><span class="s8">.</span><span class="s1">length</span><span class="s8">-</span><span class="s13">1</span><span class="s8">].</span><span class="s1">y</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">18</span><span class="s8">,</span><span class="s1"> dropStartY</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s13">18</span><span class="s8">,</span><span class="s1"> dropStartY</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s13">14</span><span class="s8">,</span><span class="s1"> dropEndY </span><span class="s8">+</span><span class="s1"> </span><span class="s13">15</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">14</span><span class="s8">,</span><span class="s1"> dropEndY </span><span class="s8">+</span><span class="s1"> </span><span class="s13">15</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#fffdd0'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>drawNozzle</span><span class="s8">(</span><span class="s1">nozzle</span><span class="s8">.</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> nozzle</span><span class="s8">.</span><span class="s1">y</span><span class="s8">,</span><span class="s1"> nozzle</span><span class="s8">.</span><span class="s1">width</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> drawNozzle</span><span class="s8">(</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">,</span><span class="s1"> w</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">save</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">translate</span><span class="s8">(</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#374151'</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> spikes </span><span class="s8">=</span><span class="s1"> </span><span class="s13">8</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> outerRadius </span><span class="s8">=</span><span class="s1"> w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> innerRadius </span><span class="s8">=</span><span class="s1"> w</span><span class="s8">/</span><span class="s13">3.5</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i</span><span class="s8">=</span><span class="s13">0</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">&lt;</span><span class="s1">spikes</span><span class="s8">*</span><span class="s13">2</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++){</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> r </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i</span><span class="s8">%</span><span class="s13">2</span><span class="s1"> </span><span class="s8">===</span><span class="s1"> </span><span class="s13">0</span><span class="s8">)</span><span class="s1"> </span><span class="s8">?</span><span class="s1"> outerRadius </span><span class="s8">:</span><span class="s1"> innerRadius</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> angle </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s8">/</span><span class="s1"> spikes</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> i</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> dx </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">cos</span><span class="s8">(</span><span class="s1">angle</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> r</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> dy </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">sin</span><span class="s8">(</span><span class="s1">angle</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> r </span><span class="s8">+</span><span class="s1"> </span><span class="s13">10</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s8">(</span><span class="s1">i</span><span class="s8">===</span><span class="s13">0</span><span class="s8">)</span><span class="s1"> ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(</span><span class="s1">dx</span><span class="s8">,</span><span class="s1"> dy</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">else</span><span class="s1"> ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">dx</span><span class="s8">,</span><span class="s1"> dy</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">closePath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#6b7280'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(-</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s13">40</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s13">40</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> </span><span class="s13">10</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(-</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> </span><span class="s13">10</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#0057a3'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillRect</span><span class="s8">(-</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> </span><span class="s13">5</span><span class="s8">,</span><span class="s1"> </span><span class="s8">-</span><span class="s13">35</span><span class="s8">,</span><span class="s1"> w </span><span class="s8">+</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> </span><span class="s13">10</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">restore</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> drawCone</span><span class="s8">(</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">,</span><span class="s1"> w</span><span class="s8">,</span><span class="s1"> h</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">save</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">translate</span><span class="s8">(</span><span class="s1">x</span><span class="s8">,</span><span class="s1"> y</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(-</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> h</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">closePath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> coneGrad </span><span class="s8">=</span><span class="s1"> ctx</span><span class="s8">.</span><span class="s1">createLinearGradient</span><span class="s8">(-</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>coneGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#d97706'</span><span class="s8">);</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>coneGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">0.5</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#fbbf24'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>coneGrad</span><span class="s8">.</span><span class="s1">addColorStop</span><span class="s8">(</span><span class="s13">1</span><span class="s8">,</span><span class="s1"> </span><span class="s9">'#b45309'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> coneGrad</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">strokeStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'rgba(146, 64, 14, 0.3)'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineWidth </span><span class="s8">=</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">for</span><span class="s8">(</span><span class="s7">let</span><span class="s1"> i</span><span class="s8">=</span><span class="s13">1</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">&lt;</span><span class="s13">6</span><span class="s8">;</span><span class="s1"> i</span><span class="s8">++)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> xPos </span><span class="s8">=</span><span class="s1"> </span><span class="s8">(</span><span class="s1">w</span><span class="s8">/</span><span class="s13">2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s1">i</span><span class="s8">/</span><span class="s13">6</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(-</span><span class="s1">xPos</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> h </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s13">1</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> i</span><span class="s8">/</span><span class="s13">6</span><span class="s8">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">moveTo</span><span class="s8">(</span><span class="s1">xPos</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">lineTo</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> h </span><span class="s8">*</span><span class="s1"> </span><span class="s8">(</span><span class="s13">1</span><span class="s1"> </span><span class="s8">-</span><span class="s1"> i</span><span class="s8">/</span><span class="s13">6</span><span class="s8">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">stroke</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">beginPath</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">ellipse</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> w</span><span class="s8">/</span><span class="s13">2</span><span class="s1"> </span><span class="s8">+</span><span class="s1"> </span><span class="s13">4</span><span class="s8">,</span><span class="s1"> </span><span class="s13">10</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s14">PI</span><span class="s8">*</span><span class="s13">2</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fillStyle </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'#d97706'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">fill</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>ctx</span><span class="s8">.</span><span class="s1">restore</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> endGame</span><span class="s8">()</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'FINISHED'</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> bodyStack </span><span class="s8">=</span><span class="s1"> iceCreamStack</span><span class="s8">.</span><span class="s1">filter</span><span class="s8">(</span><span class="s1">p </span><span class="s8">=&gt;</span><span class="s1"> p</span><span class="s8">.</span><span class="s1">type </span><span class="s8">===</span><span class="s1"> </span><span class="s9">'body'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> count </span><span class="s8">=</span><span class="s1"> bodyStack</span><span class="s8">.</span><span class="s1">length</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">count </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">10</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>showResult</span><span class="s8">(</span><span class="s13">0</span><span class="s8">,</span><span class="s1"> </span><span class="s9">"è©¦åƒå“ï¼Ÿ"</span><span class="s8">,</span><span class="s1"> </span><span class="s9">"é€™é€£ä¸€å£éƒ½ä¸å¤ åƒï¼"</span><span class="s8">,</span><span class="s1"> </span><span class="s9">"ğŸ‘»"</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// === 10åˆ†åˆ¶è©•åˆ† ===</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">const</span><span class="s1"> oneTurnHeight </span><span class="s8">=</span><span class="s1"> </span><span class="s13">60</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> totalBodyHeight </span><span class="s8">=</span><span class="s1"> bodyStack</span><span class="s8">[</span><span class="s1">bodyStack</span><span class="s8">.</span><span class="s1">length</span><span class="s8">-</span><span class="s13">1</span><span class="s8">].</span><span class="s1">y</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> turns </span><span class="s8">=</span><span class="s1"> totalBodyHeight </span><span class="s8">/</span><span class="s1"> oneTurnHeight</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> maxOffset </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>bodyStack</span><span class="s8">.</span><span class="s1">forEach</span><span class="s8">(</span><span class="s1">p </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s8">(</span><span class="s14">Math</span><span class="s8">.</span><span class="s1">abs</span><span class="s8">(</span><span class="s1">p</span><span class="s8">.</span><span class="s1">offset</span><span class="s8">)</span><span class="s1"> </span><span class="s8">&gt;</span><span class="s1"> maxOffset</span><span class="s8">)</span><span class="s1"> maxOffset </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">abs</span><span class="s8">(</span><span class="s1">p</span><span class="s8">.</span><span class="s1">offset</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> offsetRatio </span><span class="s8">=</span><span class="s1"> maxOffset </span><span class="s8">/</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">width</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> score </span><span class="s8">=</span><span class="s1"> </span><span class="s13">0</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// 1. åœˆæ•¸ (ç›®æ¨™ 3.5)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> turnDiff </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">abs</span><span class="s8">(</span><span class="s1">turns </span><span class="s8">-</span><span class="s1"> </span><span class="s13">3.5</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">turnDiff </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s13">0.2</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">5</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">turnDiff </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s13">0.5</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">3</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">1</span><span class="s8">;</span><span class="s1"><span class="Apple-converted-space">Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p7"><span class="s5"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s1">// 2. ç©©å®šåº¦ &amp; æ¬¡æ•¸</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">offsetRatio </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s13">0.15</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">3</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">offsetRatio </span><span class="s8">&lt;=</span><span class="s1"> </span><span class="s13">0.25</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">-=</span><span class="s1"> </span><span class="s13">1</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">swingCount </span><span class="s8">===</span><span class="s1"> </span><span class="s13">3</span><span class="s1"> </span><span class="s8">||</span><span class="s1"> swingCount </span><span class="s8">===</span><span class="s1"> </span><span class="s13">4</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>score </span><span class="s8">+=</span><span class="s1"> </span><span class="s13">2</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">&gt;</span><span class="s1"> </span><span class="s13">10</span><span class="s8">)</span><span class="s1"> score </span><span class="s8">=</span><span class="s1"> </span><span class="s13">10</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">&lt;</span><span class="s1"> </span><span class="s13">1</span><span class="s8">)</span><span class="s1"> score </span><span class="s8">=</span><span class="s1"> </span><span class="s13">1</span><span class="s8">;</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s12">// ç¨±è™Ÿ</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> title</span><span class="s8">,</span><span class="s1"> comment</span><span class="s8">,</span><span class="s1"> emoji</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">===</span><span class="s1"> </span><span class="s13">10</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"å…¨å®¶æ¦®è­½åº—é•·"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comment </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"å®Œç¾é‡ç¾ï¼é‚£å€‹å°–è§’å¤ªç¾äº†ï¼"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"ğŸ‘‘"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">&gt;=</span><span class="s1"> </span><span class="s13">8</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"è³‡æ·±åº—å“¡"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comment </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"å¾ˆæ£’ï¼3.5 åœˆæŠ“å¾—å¾ˆæº–ã€‚"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"âœ¨"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">&gt;=</span><span class="s1"> </span><span class="s13">6</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"åˆæ ¼å·¥è®€ç”Ÿ"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comment </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"é‚„ä¸éŒ¯ï¼Œä½†è¦å†æ›´åƒè™›ç·šä¸€é»ã€‚"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"ğŸ˜"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">score </span><span class="s8">&gt;=</span><span class="s1"> </span><span class="s13">4</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"æ–°æ‰‹ä¸Šè·¯"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comment </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"æ³¨æ„é«˜åº¦ï¼Œä¸è¦æ“ å¤ªå¤šæˆ–å¤ªå°‘ã€‚"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"ğŸ’ª"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>title </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"æ‰‹æ»‘å¤§å¸«"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>comment </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"å½¢ç‹€å®Œå…¨è·‘æ‰äº†å•¦ï¼"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>emoji </span><span class="s8">=</span><span class="s1"> </span><span class="s9">"ğŸ“‰"</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>showResult</span><span class="s8">(</span><span class="s1">score</span><span class="s8">,</span><span class="s1"> title</span><span class="s8">,</span><span class="s1"> comment</span><span class="s8">,</span><span class="s1"> emoji</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> showResult</span><span class="s8">(</span><span class="s1">score</span><span class="s8">,</span><span class="s1"> title</span><span class="s8">,</span><span class="s1"> comment</span><span class="s8">,</span><span class="s1"> emoji</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'scoreDisplay'</span><span class="s8">).</span><span class="s1">innerText </span><span class="s8">=</span><span class="s1"> score</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'titleDisplay'</span><span class="s8">).</span><span class="s1">innerText </span><span class="s8">=</span><span class="s1"> title</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'commentDisplay'</span><span class="s8">).</span><span class="s1">innerText </span><span class="s8">=</span><span class="s1"> comment</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>document</span><span class="s8">.</span><span class="s1">getElementById</span><span class="s8">(</span><span class="s9">'resultEmoji'</span><span class="s8">).</span><span class="s1">innerText </span><span class="s8">=</span><span class="s1"> emoji</span><span class="s8">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">Â Â  Â  Â  Â  Â  Â </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>setTimeout</span><span class="s8">(()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>resultScreen</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">remove</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">},</span><span class="s1"> </span><span class="s13">500</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> handleStart</span><span class="s8">(</span><span class="s1">e</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">gameState </span><span class="s8">!==</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">)</span><span class="s1"> </span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>e</span><span class="s8">.</span><span class="s1">preventDefault</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>isPressing </span><span class="s8">=</span><span class="s1"> </span><span class="s7">true</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateConePos</span><span class="s8">(</span><span class="s1">e</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> handleMove</span><span class="s8">(</span><span class="s1">e</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">gameState </span><span class="s8">!==</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">)</span><span class="s1"> </span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>e</span><span class="s8">.</span><span class="s1">preventDefault</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>updateConePos</span><span class="s8">(</span><span class="s1">e</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> handleEnd</span><span class="s8">(</span><span class="s1">e</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">gameState </span><span class="s8">!==</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">)</span><span class="s1"> </span><span class="s7">return</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">isPressing</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>finishSqueezing</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s7">function</span><span class="s1"> updateConePos</span><span class="s8">(</span><span class="s1">e</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">let</span><span class="s1"> clientX</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s7">if</span><span class="s1"> </span><span class="s8">(</span><span class="s1">e</span><span class="s8">.</span><span class="s1">touches</span><span class="s8">)</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>clientX </span><span class="s8">=</span><span class="s1"> e</span><span class="s8">.</span><span class="s1">touches</span><span class="s8">[</span><span class="s13">0</span><span class="s8">].</span><span class="s1">clientX</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span><span class="s1"> </span><span class="s7">else</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  Â  Â  </span>clientX </span><span class="s8">=</span><span class="s1"> e</span><span class="s8">.</span><span class="s1">clientX</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>cone</span><span class="s8">.</span><span class="s1">x </span><span class="s8">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">max</span><span class="s8">(</span><span class="s1">cone</span><span class="s8">.</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s8">.</span><span class="s1">min</span><span class="s8">(</span><span class="s1">width </span><span class="s8">-</span><span class="s1"> cone</span><span class="s8">.</span><span class="s1">width</span><span class="s8">/</span><span class="s13">2</span><span class="s8">,</span><span class="s1"> clientX</span><span class="s8">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">}</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>startBtn</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'click'</span><span class="s8">,</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>startScreen</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>resetGame</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>loop</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>retryBtn</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'click'</span><span class="s8">,</span><span class="s1"> </span><span class="s8">()</span><span class="s1"> </span><span class="s8">=&gt;</span><span class="s1"> </span><span class="s8">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>resultScreen</span><span class="s8">.</span><span class="s1">classList</span><span class="s8">.</span><span class="s1">add</span><span class="s8">(</span><span class="s9">'hidden'</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>gameState </span><span class="s8">=</span><span class="s1"> </span><span class="s9">'PLAYING'</span><span class="s8">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>resetGame</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  Â  Â  </span>loop</span><span class="s8">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span></span><span class="s8">});</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>canvas</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'mousedown'</span><span class="s8">,</span><span class="s1"> handleStart</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'mousemove'</span><span class="s8">,</span><span class="s1"> handleMove</span><span class="s8">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'mouseup'</span><span class="s8">,</span><span class="s1"> handleEnd</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>canvas</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'touchstart'</span><span class="s8">,</span><span class="s1"> handleStart</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span><span class="s1">passive</span><span class="s8">:</span><span class="s1"> </span><span class="s7">false</span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'touchmove'</span><span class="s8">,</span><span class="s1"> handleMove</span><span class="s8">,</span><span class="s1"> </span><span class="s8">{</span><span class="s1">passive</span><span class="s8">:</span><span class="s1"> </span><span class="s7">false</span><span class="s8">});</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">Â  Â  Â  Â  </span>window</span><span class="s8">.</span><span class="s1">addEventListener</span><span class="s8">(</span><span class="s9">'touchend'</span><span class="s8">,</span><span class="s1"> handleEnd</span><span class="s8">);</span></p>
<p class="p6"><span class="s10"></span><br></p>
<p class="p1"><span class="s5"><span class="Apple-converted-space">Â  Â  </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
</body>
</html>
